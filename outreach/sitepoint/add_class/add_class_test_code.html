<!DOCTYPE html>
<html>
<head>
<title></title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style type="text/css">

.standard{
	background: #eee;
}

.red{
	background: red;
}

.blue{
	background: blue;
}

.highlight{
	background: gold;
}

</style>

</head>
<body>

<form id="frm">
	<input type="text">
	<select id="sel">
		<option>asdf</option>
		<option>asdf</option>
		<option>asdf</option>
		<option>asdf</option>
	</select>
</form>

<div id="iddiv">ID div</div>

<div class="classdiv">Class div</div>
<div class="classdiv">Class div</div>
<div class="classdiv">Class div</div>
<div class="classdiv">Class div</div>
<div class="classdiv">Class div</div>

<button>Add Class</button>
<button>Remove Class</button>

<script>

var output = document.getElementById('mydiv');

var frm = document.getElementById('frm');
var sel = document.getElementById('sel');




/*
inputs:
	is selector? (string)
		use querySelectorAll
	is single element?
		convert to array
	is nodelist?
		good. carry on.
*/



function addClass(elements, myClass){

	// if there are no elements, we're done
	if(!elements) return;

	// if we have a selector, get the chosen elements
	if(typeof(elements)==='string'){
		elements = document.querySelectorAll(elements);
	}

	// if we have only one dom element, make it an array to simplify behavior
	else if(elements.tagName){ elements=[elements]; }
	
	// add class to all chosen elements
	for(var i=0; i<elements.length; i++){

		// if class is not already found
		if ( (' '+elements[i].className+' ').indexOf(' '+myClass+' ') < 0 ) {
			
			// add class
			elements[i].className += ' ' + myClass;
		}
	}
}




function removeClass(elements, myClass){

	// if there are no elements, we're done
	if(!elements) return;

	// if we have a selector, get the chosen elements
	if(typeof(elements)==='string'){
		elements = document.querySelectorAll(elements);
	}
	
	// if we have only one dom element, make it an array to simplify behavior
	else if(elements.tagName){ elements=[elements]; }
	
	// create pattern to find class name
	var reg = new RegExp('(^| )'+myClass+'($| )','g');

	// remove class from all chosen elements
	for(var i=0; i<elements.length; i++){
		elements[i].className = elements[i].className.replace(reg,' ');
	}
}








// previous robust versions

/*
function addClass(elements, myClass){
	if(!elements) return;
	if(typeof(elements)==='string'){
		elements = document.querySelectorAll(elements);
	}
	else if(!elements.length){ elements=[elements]; }
	for(var i=0; i<elements.length; i++){
		if(!(' '+elements[i].className+' ').indexOf(' '+myClass+' ') > -1){
			elements[i].className += ' ' + myClass;
		}
	}
}


function removeClass(elements, myClass){
	if(!elements) return;
	if(typeof(elements)==='string'){
		elements = document.querySelectorAll(elements);
	}
	else if(!elements.length){ elements=[elements]; }

	var reg = new RegExp('(^| )'+myClass+'($| )','g');
	for(var i=0; i<elements.length; i++){
		elements[i].className = elements[i].className.replace(reg,' ');
	}
}
*/


/*
usage examples:

addClass('#iddiv','highlight');
addClass('.classdiv','highlight');

addClass(document.getElementById('iddiv'),'highlight');
addClass(document.querySelector('.classdiv'),'highlight');
addClass(document.querySelectorAll('.classdiv'),'highlight');


// removeClass all same as addClass examples
// but just replace addClass with removeClass
// example:
removeClass('.classdiv','highlight');


*/






/*




// commented versions


function addClass(elements, myClass){

	// if we have a selector, get the chosen elements
	if(typeof(elements)==='string'){
		elements = document.querySelectorAll(elements);
	}

	// if we have only one dom element, make it an array to simplify behavior
	else if(!elements.length){ elements=[elements]; }
	
	// add class to all chosen elements
	for(var i=0; i<elements.length; i++){
		if(!(' '+elements[i].className+' ').indexOf(' '+myClass+' ') > -1){
			elements[i].className += ' ' + myClass;
		}
	}
}


function removeClass(elements, myClass){

	// if we have a selector, get the chosen elements
	if(typeof(elements)==='string'){
		elements = document.querySelectorAll(elements);
	}
	
	// if we have only one dom element, make it an array to simplify behavior
	else if(!elements.length){ elements=[elements]; }
	
	// create pattern to find class name
	var reg = new RegExp('(^| )'+myClass+'($| )','g');

	// remove class from all chosen elements
	for(var i=0; i<elements.length; i++){
		elements[i].className = elements[i].className.replace(reg,' ');
	}
}











// modern versions

function addClass(selector, myClass){
	
	// get all elements
	elements = document.querySelectorAll(selector);
	
	// add class to all chosen elements
	for(var i=0; i<elements.length; i++){
		elements[i].classList.add(myClass);
	}
}

function removeClass(selector, myClass){
	
	// get all elements
	elements = document.querySelectorAll(selector);
	
	// remove class from all chosen elements
	for(var i=0; i<elements.length; i++){
		elements[i].classList.remove(myClass);
	}
}

*/












// version with selectors only

/*
function addClass(selector,name){
	var elements = document.querySelectorAll(selector);
	for(var i=0; i<elements.length; i++){
		if(!(' '+elements[i].className+' ').indexOf(' '+name+' ') > -1){
			elements[i].className += ' ' + name;
		}
	}
}

function removeClass(selector,name){
	var elements = document.querySelectorAll(selector);
	for(var i=0; i<elements.length; i++){
		var reg = new RegExp('(^| )'+name+'($| )','ig');
		elements[i].className = elements[i].className.replace(reg,' ');
	}
}
*/

/*
usage examples:

addClass('#iddiv','highlight');
addClass('.classdiv','highlight');
removeClass('.classdiv','highlight');
*/


</script>
</body>
</html>